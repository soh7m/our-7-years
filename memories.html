<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 Years of Us</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

    <header class="hero">
        <div class="hero-content">
            <h1>Happy 7th Anniversary, Puchke!</h1>
            <p>Seven years, countless memories, one love.</p>
            <a onclick="slowScroll('#timeline', 1500)" class="btn" style="cursor: pointer;">Walk Down Memory Lane</a>
        </div>
    </header>

    <div class="container" id="timeline">
        <section class="snap-area">        
        <div class="memory-card">
            <div class="photo-frame">
                <img src="images/year0.jpg" alt="Year 0">
            </div>
            <div class="text-content">
                <h2>Chapter 1: The "Hi" That Changed Everything</h2>
                <p>It started with a Snapchat text on Dec 31, 2018. It took you until Jan 25 to reply, but once we started talking, we couldn't stop. On Feb 7, 2019, I confessed my feelings and immediately turned off my phone out of anxiety. I didn't plan to fall for you, but my heart had other plans.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">
        <div class="memory-card reverse">
            <div class="photo-frame">
                <img src="images/year1.jpg" alt="Year 1">
            </div>
            <div class="text-content">
                <h2>Chapter 2: By Your Side Through Change</h2>
                <p>Our first year was a test of resilience. You were moving on from the past and changing schools, leaving behind the comfort of the place you'd known all your life. Watching you navigate that adjustment disorder was hard, but being there to hold your hand through the storm made us stronger.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">
        <div class="memory-card">
            <div class="photo-frame">
                <img src="images/year2.jpg" alt="Year 2">
            </div>
            <div class="text-content">
                <h2>Chapter 3: Daily Commutes & NEET Prep</h2>
                <p>The year of "us." I remember traveling all the way just to accompany you back home. Those days were my favorite. While you were deep in NEET preparation and fighting the mental battle of attachment, I was just happy to be the company you loved.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">
        <div class="memory-card reverse">
            <div class="photo-frame">
                <img src="images/year3.jpg" alt="Year 3">
            </div>
            <div class="text-content">
                <h2>Chapter 4: Growing Pains</h2>
                <p>Life started pulling us in different directions. I started college, and you were bravely facing your second NEET attempt. The fear of missing out weighed on you, and little things became heavy. We took a brief break, but our Kahini wasn't over yet.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">
        <div class="memory-card">
            <div class="photo-frame">
                <img src="images/year4.jpg" alt="Year 4">
            </div>
            <div class="text-content">
                <h2>Chapter 5: Finding Your Wings</h2>
                <p>We found our way back. This was the year you found your true calling: Psychology. You moved to a new state, far braver than before, and made new friends. Watching you grow into yourself was the highlight of my year. Even though it was painful at the beginning of our LDR.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">
        <div class="memory-card reverse">
            <div class="photo-frame">
                <img src="images/year5.jpg" alt="Year 5">
            </div>
            <div class="text-content">
                <h2>Chapter 6: Losing My Way</h2>
                <p>You rose above heartbreak from friends, but I began to sink. Overwhelmed by an institute I didn't fit into and crushed by underconfidence, I lost my sanity. I pushed you away to protect myself, leaving without a reason because I was scared to lose you later. A mistake that haunts me still. A regret that I carry with me always.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">
        <div class="memory-card">
            <div class="photo-frame">
                <img src="images/year6.jpg" alt="Year 6">
            </div>
            <div class="text-content">
                <h2>Chapter 7: Getting back together</h2>
                <p>Dec 31st again. After 7 months of silence, I texted to thank you for making me a better human. I realized you are a goddess to me. You forgave the unforgivable. Travelling to your state to see you after the no-contact phase was the best decision of my life, worth all the hassle I've faced on my way to you.</p>
            </div>
        </div>
        <div class="scroll-arrow" onclick="scrollToNext(this)">
        <span></span>
        <span></span>
        <span></span>
        </div>
        </section>
        <section class="snap-area">        
        <div class="memory-card reverse">
            <div class="photo-frame">
                <img src="images/year7.jpg" alt="Year 7">
            </div>
            <div class="text-content">
                <h2>Chapter 8: Lucky Number Seven</h2>
                <p>Here we are. Happier, grown, and fighting problems instead of each other. That break, painful as it was, made us value this even more. Career tension and family pressure exist, but they don't burden me anymore‚Äîbecause now, I face them with you. I will rather fight with you than to torture myself with no voice. You taught me that! I really am so grateful to have you in my life.</p>
                <br>
                <p>Thank you for being my best friend, my partner, and the love of my life. Here's to many more years of us, filled with love, laughter, and endless memories. I love you more than words can express, Puchke ‚ù§Ô∏è</p>
            </div>
        </div>
        </section>
    </div>

    <footer>
        <p>iloveyou 3000, my Puchke ‚ù§Ô∏èüòå</p>
    </footer>
    <audio id="myAudio">
    </audio>

    <button id="musicBtn" class="music-btn" onclick="toggleMusic()">
        üéµ Play Music
    </button>

    <script>
    var playlist = [
        "music/song1.mp3",
        "music/song2.mp3",
        "music/song3.mp3",
        "music/song4.mp3",
        "music/song5.mp3",
        "music/song6.mp3",
        "music/song7.mp3" 
    ];
    
    var currentSongIndex = 0;
    var music = document.getElementById("myAudio");
    var btn = document.getElementById("musicBtn");
    
    // Set volume (optional)
    music.volume = 0.3; // 30% volume to avoid being too loud
    music.src = playlist[currentSongIndex];

    // 1. Set the default state to "Playing"
    var isPlaying = true;
    btn.innerHTML = "‚è∏ Pause Music";

    // 2. Try to play immediately when the page loads
    var playPromise = music.play();

    if (playPromise !== undefined) {
        playPromise.then(_ => {
            // Autoplay started!
            console.log("Autoplay success");
        })
        .catch(error => {
            // Auto-play was prevented by the browser
            console.log("Autoplay prevented. Waiting for user click.");
            isPlaying = false;
            btn.innerHTML = "üéµ Play Music"; // Switch button back to "Play"
        });
    }

    // 3. The Toggle Function (Clicking the button)
    function toggleMusic() {
        if (isPlaying) {
            music.pause();
            btn.innerHTML = "üéµ Play Music";
            isPlaying = false;
        } else {
            music.play();
            btn.innerHTML = "‚è∏ Pause Music";
            isPlaying = true;
        }
    }

    // 4. Auto-Next Song
    music.onended = function() {
        currentSongIndex++;
        if (currentSongIndex >= playlist.length) {
            currentSongIndex = 0;
        }
        music.src = playlist[currentSongIndex];
        music.play();
        // Ensure button stays on "Pause" since music is continuing
        isPlaying = true; 
        btn.innerHTML = "‚è∏ Pause Music";
    };
    // --- STRICT FOCUS OBSERVER ---
    
    // 1. Setup options
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.5 // Trigger when 50% of the card is visible
    };

    // 2. Create the observer logic
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                // If in view, make it Active
                entry.target.classList.add('active');
            } else {
                // If scrolling away (up or down), remove Active
                // This makes it "disappear into thin air" again
                entry.target.classList.remove('active');
            }
        });
    }, observerOptions);

    // 3. Target all cards
    const cards = document.querySelectorAll('.memory-card');
    cards.forEach((el) => observer.observe(el));

    // --- FOOTER SPECIFIC OBSERVER ---
    // The footer needs a slightly different trigger so it pops up at the very end
    const footerObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            } else {
                entry.target.classList.remove('active');
            }
        });
    }, { threshold: 0.1 }); // Trigger as soon as 10% of footer is seen

    const footer = document.querySelector('footer');
    footerObserver.observe(footer);
    </script>

    <script>
        // FUNCTION TO SCROLL TO THE NEXT CARD
        function scrollToNext(element) {
        // 1. Find the section this arrow belongs to
        const currentSection = element.closest('.snap-area');
        
        // 2. Find the immediate next section
        const nextSection = currentSection.nextElementSibling;
        
        // 3. If there is a next section, scroll to it!
        if (nextSection) {
            nextSection.scrollIntoView({ 
                behavior: 'smooth',
                block: 'center' // Tries to center the next card
            });
        }
    }
    </script>

    <script>
        // --- SMOOTH SCROLL FUNCTION ---
        function slowScroll(targetId, duration) {
        var target = document.querySelector(targetId);
        if (!target) return;

        var targetPosition = target.getBoundingClientRect().top + window.pageYOffset; // Where we want to go
        var startPosition = window.pageYOffset; // Where we are now
        var distance = targetPosition - startPosition; // How far to scroll
        var startTime = null;

        function animation(currentTime) {
            if (startTime === null) startTime = currentTime;
            var timeElapsed = currentTime - startTime;
        
            // This math makes it start slow, speed up, then slow down (Ease-In-Out)
            var run = ease(timeElapsed, startPosition, distance, duration);
        
            window.scrollTo(0, run);

            if (timeElapsed < duration) requestAnimationFrame(animation);
        }

        // Quadratic Easing function (The math for "smoothness")
        function ease(t, b, c, d) {
            t /= d / 2;
            if (t < 1) return c / 2 * t * t + b;
            t--;
            return -c / 2 * (t * (t - 2) - 1) + b;
        }

        requestAnimationFrame(animation);
    }
    </script>
</body>
</html>